(this.webpackJsonpchaoshostingui=this.webpackJsonpchaoshostingui||[]).push([[0],{26:function(t,e,n){},27:function(t,e,n){},36:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),s=n(9),i=n.n(s),a=(n(26),n(27),n(4)),c=n(8),u=n.n(c),h=n(16),p=n(11),v=n(19),l=n(20),d=n(21),f=n(17),O=n(3),b=n(6),j=function(){function t(e,n){Object(O.a)(this,t),this.http=void 0,this.baseUrl=void 0,this.jsonParseReviver=void 0,this.http=n||window,this.baseUrl=void 0!==e&&null!==e?e:""}return Object(b.a)(t,[{key:"getCurrentVoteState",value:function(){var t=this,e=this.baseUrl+"/Chaos/GetCurrentVoteState";e=e.replace(/[?&]$/,"");return this.http.fetch(e,{method:"GET",headers:{Accept:"text/plain"}}).then((function(e){return t.processGetCurrentVoteState(e)}))}},{key:"processGetCurrentVoteState",value:function(t){var e=this,n=t.status,r={};return t.headers&&t.headers.forEach&&t.headers.forEach((function(t,e){return r[e]=t})),200===n?t.text().then((function(t){var n=""===t?null:JSON.parse(t,e.jsonParseReviver);return x.fromJS(n)})):200!==n&&204!==n?t.text().then((function(t){return m("An unexpected server error occurred.",n,t,r)})):Promise.resolve(null)}},{key:"vote",value:function(t){var e=this,n=this.baseUrl+"/Chaos/Vote?";void 0!==t&&null!==t&&(n+="voteOptionId="+encodeURIComponent(""+t)+"&"),n=n.replace(/[?&]$/,"");return this.http.fetch(n,{method:"POST",headers:{}}).then((function(t){return e.processVote(t)}))}},{key:"processVote",value:function(t){var e=t.status,n={};return t.headers&&t.headers.forEach&&t.headers.forEach((function(t,e){return n[e]=t})),200===e?t.text().then((function(t){})):200!==e&&204!==e?t.text().then((function(t){return m("An unexpected server error occurred.",e,t,n)})):Promise.resolve(null)}},{key:"setNewVoteOptions",value:function(t){var e=this,n=this.baseUrl+"/Chaos/SetNewVoteOptions";n=n.replace(/[?&]$/,"");var r={body:JSON.stringify(t),method:"POST",headers:{"Content-Type":"application/json"}};return this.http.fetch(n,r).then((function(t){return e.processSetNewVoteOptions(t)}))}},{key:"processSetNewVoteOptions",value:function(t){var e=t.status,n={};return t.headers&&t.headers.forEach&&t.headers.forEach((function(t,e){return n[e]=t})),200===e?t.text().then((function(t){})):200!==e&&204!==e?t.text().then((function(t){return m("An unexpected server error occurred.",e,t,n)})):Promise.resolve(null)}},{key:"ws",value:function(){var t=this,e=this.baseUrl+"/ws";e=e.replace(/[?&]$/,"");return this.http.fetch(e,{method:"GET",headers:{}}).then((function(e){return t.processWs(e)}))}},{key:"processWs",value:function(t){var e=t.status,n={};return t.headers&&t.headers.forEach&&t.headers.forEach((function(t,e){return n[e]=t})),200===e?t.text().then((function(t){})):200!==e&&204!==e?t.text().then((function(t){return m("An unexpected server error occurred.",e,t,n)})):Promise.resolve(null)}},{key:"ws2",value:function(){var t=this,e=this.baseUrl+"/host/ws";e=e.replace(/[?&]$/,"");return this.http.fetch(e,{method:"GET",headers:{}}).then((function(e){return t.processWs2(e)}))}},{key:"processWs2",value:function(t){var e=t.status,n={};return t.headers&&t.headers.forEach&&t.headers.forEach((function(t,e){return n[e]=t})),200===e?t.text().then((function(t){})):200!==e&&204!==e?t.text().then((function(t){return m("An unexpected server error occurred.",e,t,n)})):Promise.resolve(null)}}]),t}(),w=function(){function t(e){if(Object(O.a)(this,t),this.optionId=void 0,this.optionDescription=void 0,this.optionVotes=void 0,e)for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])}return Object(b.a)(t,[{key:"init",value:function(t){t&&(this.optionId=t.optionId,this.optionDescription=t.optionDescription,this.optionVotes=t.optionVotes)}},{key:"toJSON",value:function(t){return(t="object"===typeof t?t:{}).optionId=this.optionId,t.optionDescription=this.optionDescription,t.optionVotes=this.optionVotes,t}}],[{key:"fromJS",value:function(e){e="object"===typeof e?e:{};var n=new t;return n.init(e),n}}]),t}(),x=function(){function t(e){if(Object(O.a)(this,t),this.previousVotingResult=void 0,this.voteOptionsState=void 0,e)for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])}return Object(b.a)(t,[{key:"init",value:function(t){if(t&&(this.previousVotingResult=t.previousVotingResult,Array.isArray(t.voteOptionsState))){this.voteOptionsState=[];var e,n=Object(f.a)(t.voteOptionsState);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.voteOptionsState.push(w.fromJS(r))}}catch(o){n.e(o)}finally{n.f()}}}},{key:"toJSON",value:function(t){if((t="object"===typeof t?t:{}).previousVotingResult=this.previousVotingResult,Array.isArray(this.voteOptionsState)){t.voteOptionsState=[];var e,n=Object(f.a)(this.voteOptionsState);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.voteOptionsState.push(r.toJSON())}}catch(o){n.e(o)}finally{n.f()}}return t}}],[{key:"fromJS",value:function(e){e="object"===typeof e?e:{};var n=new t;return n.init(e),n}}]),t}(),S=function(t){Object(v.a)(n,t);var e=Object(l.a)(n);function n(t,r,o,s,i){var a;return Object(O.a)(this,n),(a=e.call(this)).message=void 0,a.status=void 0,a.response=void 0,a.headers=void 0,a.result=void 0,a.isApiException=!0,a.message=t,a.status=r,a.response=o,a.headers=s,a.result=i,a}return Object(b.a)(n,null,[{key:"isApiException",value:function(t){return!0===t.isApiException}}]),n}(Object(d.a)(Error));function m(t,e,n,r,o){throw null!==o&&void 0!==o?o:new S(t,e,n,r,null)}window.settings=window.settings||{};var y="https://".concat(window.settings.webApiServer),g="wss://".concat(window.settings.webApiServer,"/ws"),k=new j(y),V={voteOptionState:new x({previousVotingResult:"",voteOptionsState:[]})},N=Object(p.b)({name:"voter",initialState:V,reducers:{updateVote:function(t,e){t.voteOptionState=e.payload}}}),E=N.actions.updateVote,A=function(t){return t.voter.voteOptionState},J=N.reducer,P=n(1),C=function(t){var e=t.voteOption,n=Object(a.b)();return Object(P.jsx)("div",{className:"col d-grid gap-1",children:Object(P.jsxs)("button",{className:"btn btn-primary",onClick:function(){var t;n((t=e.optionId,function(){var e=Object(h.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.vote(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(P.jsx)("span",{children:e.optionDescription}),Object(P.jsx)("br",{}),Object(P.jsxs)("span",{children:["Votes: ",e.optionVotes]})]})},e.optionId)},I=new function t(){var e=this;Object(O.a)(this,t),this.Socket=void 0,this.addHandler=function(t){e.Socket.onmessage=t},this.Socket=new WebSocket(g)};function R(){var t=Object(a.c)(A),e=Object(a.b)(),n=function(t){var n=x.fromJS(JSON.parse(t.data));e(E(n))};return Object(r.useEffect)((function(){I.addHandler(n),e(function(){var t=Object(h.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.getCurrentVoteState().then((function(t){return e(E(t))}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}),[]),Object(P.jsxs)("div",{className:"container",children:[Object(P.jsxs)("h1",{className:"text-center",children:["GTA V Torture Tool"," ",Object(P.jsx)("small",{className:"text-muted",children:"for use with 'friends'"})]}),Object(P.jsxs)("p",{className:"lead text-center",children:["Previous vote: ",t.previousVotingResult]}),!t.voteOptionsState&&Object(P.jsx)("div",{className:"spinner-border",role:"status",children:Object(P.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),t.voteOptionsState&&Object(P.jsx)("div",{className:"container",children:Object(P.jsx)("div",{className:"row row-cols-2 gy-2",children:t.voteOptionsState.map((function(t){return Object(P.jsx)(C,{voteOption:t})}))})})]})}var T=function(){return Object(P.jsx)(R,{})},U=Object(p.a)({reducer:{voter:J}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(P.jsx)(o.a.StrictMode,{children:Object(P.jsx)(a.a,{store:U,children:Object(P.jsx)(T,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.8f13eaee.chunk.js.map